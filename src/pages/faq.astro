---
import Layout from '../layouts/Layout.astro';
import { getLangFromUrl, useTranslations } from '../i18n/translations';
import CTA from '../components/CTA.astro';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const faqs = [
  { q: t('faq.q1'), a: t('faq.a1') },
  { q: t('faq.q2'), a: t('faq.a2') },
  { q: t('faq.q3'), a: t('faq.a3') },
  { q: t('faq.q4'), a: t('faq.a4') },
  { q: t('faq.q5'), a: t('faq.a5') },
  {
    q: 'Môžete podať hlásenie aj spätne?',
    a: 'Áno, hlásenia môžeme spracovať a podať aj spätne za predchádzajúce obdobia. Kontaktujte nás a preberieme vašu situáciu.',
  },
  {
    q: 'Ako dlho trvá spracovanie hlásenia?',
    a: 'Štandardne spracujeme hlásenie do 3-5 pracovných dní od doručenia kompletných podkladov. V prípade urgentnej potreby vieme zabezpečiť expresné spracovanie.',
  },
  {
    q: 'Čo ak prekročím prah oslobodenia počas roka?',
    a: 'Ak počas roka prekročíte prah oslobodenia (1 000 000 EUR pre rok 2025), vzniká vám povinnosť podávať hlásenia od mesiaca prekročenia. Kontaktujte nás a pomôžeme vám s nastavením procesu.',
  },
];
---

<Layout title={`${t('nav.faq')} | Intrastat Portál`} description="Často kladené otázky o Intrastat hláseniach. Zistite všetko o povinnostiach, termínoch a sankciách.">
  <!-- Page Header -->
  <section class="bg-gradient-to-br from-primary-600 to-primary-800 py-16 md:py-20">
    <div class="container-custom">
      <div class="max-w-3xl">
        <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">
          {t('faq.title')}
        </h1>
        <p class="text-xl text-primary-100">
          Odpovede na najčastejšie otázky o Intrastat hláseniach
        </p>
      </div>
    </div>
  </section>

  <!-- FAQ List -->
  <section class="section-padding">
    <div class="container-custom">
      <div class="max-w-3xl mx-auto">
        <div class="space-y-4">
          {faqs.map((faq, index) => (
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
              <button
                class="w-full px-6 py-5 text-left flex items-center justify-between gap-4 hover:bg-slate-50 transition-colors faq-button"
                data-index={index}
              >
                <span class="text-lg font-semibold text-slate-900">{faq.q}</span>
                <svg class="w-5 h-5 text-slate-500 flex-shrink-0 transition-transform faq-icon" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                </svg>
              </button>
              <div class="hidden px-6 pb-5 faq-content" data-index={index}>
                <p class="text-slate-600">{faq.a}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Still have questions -->
  <section class="section-padding bg-slate-50">
    <div class="container-custom">
      <div class="max-w-2xl mx-auto text-center">
        <h2 class="text-2xl md:text-3xl font-bold text-slate-900 mb-4">
          Nenašli ste odpoveď?
        </h2>
        <p class="text-lg text-slate-600 mb-8">
          Kontaktujte nás a radi zodpovieme všetky vaše otázky ohľadom Intrastat hlásení.
        </p>
        <a href={`${lang === 'sk' ? '' : '/en'}/kontakt`} class="btn-primary">
          Kontaktovať nás
        </a>
      </div>
    </div>
  </section>

  <CTA />
</Layout>

<script>
  document.querySelectorAll('.faq-button').forEach((button) => {
    button.addEventListener('click', () => {
      const index = button.getAttribute('data-index');
      const content = document.querySelector(`.faq-content[data-index="${index}"]`);
      const icon = button.querySelector('.faq-icon');
      
      content?.classList.toggle('hidden');
      icon?.classList.toggle('rotate-180');
    });
  });
</script>
