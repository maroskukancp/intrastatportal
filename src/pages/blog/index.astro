---
import Layout from '../../layouts/Layout.astro';
import { getLangFromUrl, useTranslations } from '../../i18n/translations';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const prefix = lang === 'sk' ? '' : '/en';

const posts = [
  {
    slug: 'co-je-intrastat',
    title: 'Čo je Intrastat a kedy vzniká povinnosť?',
    excerpt: 'Komplexný sprievodca systémom Intrastat pre slovenské firmy. Zistite, kedy vám vzniká povinnosť podávať hlásenia a čo všetko potrebujete vedieť.',
    date: '2025-01-15',
    readTime: '5 min',
    category: 'Základy',
  },
  {
    slug: 'prahy-oslobodenia-2025',
    title: 'Prahy oslobodenia pre rok 2025',
    excerpt: 'Aktuálne prahy oslobodenia pre Intrastat hlásenia v roku 2025. Čo sa zmenilo a ako to ovplyvní vašu firmu.',
    date: '2025-01-10',
    readTime: '3 min',
    category: 'Legislatíva',
  },
  {
    slug: 'najcastejsie-chyby',
    title: '5 najčastejších chýb pri Intrastat hláseniach',
    excerpt: 'Vyhnite sa týmto častým chybám pri podávaní Intrastat hlásení. Praktické tipy od odborníkov.',
    date: '2025-01-05',
    readTime: '4 min',
    category: 'Tipy',
  },
];

function formatDate(dateString: string) {
  const date = new Date(dateString);
  return date.toLocaleDateString('sk-SK', {
    day: 'numeric',
    month: 'long',
    year: 'numeric',
  });
}
---

<Layout title={`${t('nav.blog')} | Intrastat Portál`} description="Novinky a užitočné informácie zo sveta Intrastat. Tipy, legislatívne zmeny a praktické rady.">
  <!-- Page Header -->
  <section class="bg-gradient-to-br from-primary-600 to-primary-800 py-16 md:py-20">
    <div class="container-custom">
      <div class="max-w-3xl">
        <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">
          {t('blog.title')}
        </h1>
        <p class="text-xl text-primary-100">
          {t('blog.subtitle')}
        </p>
      </div>
    </div>
  </section>

  <!-- Blog Posts -->
  <section class="section-padding">
    <div class="container-custom">
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {posts.map((post) => (
          <article class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden hover:shadow-lg transition-shadow">
            <div class="h-48 bg-slate-100 flex items-center justify-center">
              <svg class="w-12 h-12 text-slate-300" fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 01-2.25 2.25M16.5 7.5V18a2.25 2.25 0 002.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 002.25 2.25h13.5M6 7.5h3v3H6v-3z" />
              </svg>
            </div>
            <div class="p-6">
              <div class="flex items-center gap-3 mb-3">
                <span class="text-xs font-medium text-primary-600 bg-primary-50 px-2 py-1 rounded">
                  {post.category}
                </span>
                <span class="text-xs text-slate-500">{post.readTime} čítania</span>
              </div>
              <h2 class="text-xl font-bold text-slate-900 mb-2 hover:text-primary-600 transition-colors">
                <a href={`${prefix}/blog/${post.slug}`}>{post.title}</a>
              </h2>
              <p class="text-slate-600 text-sm mb-4 line-clamp-3">
                {post.excerpt}
              </p>
              <div class="flex items-center justify-between">
                <time class="text-xs text-slate-500">{formatDate(post.date)}</time>
                <a 
                  href={`${prefix}/blog/${post.slug}`}
                  class="text-sm font-medium text-primary-600 hover:text-primary-700 inline-flex items-center gap-1"
                >
                  {t('blog.readMore')}
                  <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
                  </svg>
                </a>
              </div>
            </div>
          </article>
        ))}
      </div>
    </div>
  </section>
</Layout>
