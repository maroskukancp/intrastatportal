---
import Layout from '../../../layouts/Layout.astro';
import { useTranslations } from '../../../i18n/translations';

const t = useTranslations('en');
const base = import.meta.env.BASE_URL.replace(/\/$/, '');

const posts = [
  {
    slug: 'co-je-intrastat',
    title: 'What is Intrastat and when does the obligation arise?',
    excerpt: 'A comprehensive guide to the Intrastat system for Slovak companies. Find out when you are obligated to submit reports and what you need to know.',
    date: '2025-01-15',
    readTime: '5 min',
    category: 'Basics',
    image: `${base}/images/blog-co-je-intrastat.jpg`,
  },
  {
    slug: 'prahy-oslobodenia-2025',
    title: 'Exemption thresholds for 2025',
    excerpt: 'Current exemption thresholds for Intrastat reports in 2025. What has changed and how it affects your company.',
    date: '2025-01-10',
    readTime: '3 min',
    category: 'Legislation',
    image: `${base}/images/blog-prahy-oslobodenia.jpg`,
  },
  {
    slug: 'najcastejsie-chyby',
    title: '5 most common mistakes in Intrastat reports',
    excerpt: 'Avoid these common mistakes when submitting Intrastat reports. Practical tips from experts.',
    date: '2025-01-05',
    readTime: '4 min',
    category: 'Tips',
    image: `${base}/images/blog-najcastejsie-chyby.jpg`,
  },
];

function formatDate(dateString: string) {
  const date = new Date(dateString);
  return date.toLocaleDateString('en-US', {
    day: 'numeric',
    month: 'long',
    year: 'numeric',
  });
}
---

<Layout title={`${t('nav.blog')} | Intrastat Portal`} description="News and useful information from the world of Intrastat. Tips, legislative changes and practical advice.">
  <!-- Page Header -->
  <section class="bg-gradient-to-br from-primary-600 to-primary-800 py-16 md:py-20">
    <div class="container-custom">
      <div class="max-w-3xl">
        <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">
          {t('blog.title')}
        </h1>
        <p class="text-xl text-primary-100">
          {t('blog.subtitle')}
        </p>
      </div>
    </div>
  </section>

  <!-- Blog Posts -->
  <section class="section-padding">
    <div class="container-custom">
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {posts.map((post) => (
          <article class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden hover:shadow-lg transition-shadow">
            <img 
              src={post.image} 
              alt={post.title}
              class="h-48 w-full object-cover"
              loading="lazy"
            />
            <div class="p-6">
              <div class="flex items-center gap-3 mb-3">
                <span class="text-xs font-medium text-primary-600 bg-primary-50 px-2 py-1 rounded">
                  {post.category}
                </span>
                <span class="text-xs text-slate-500">{post.readTime} read</span>
              </div>
              <h2 class="text-xl font-bold text-slate-900 mb-2 hover:text-primary-600 transition-colors">
                <a href={`/en/blog/${post.slug}`}>{post.title}</a>
              </h2>
              <p class="text-slate-600 text-sm mb-4 line-clamp-3">
                {post.excerpt}
              </p>
              <div class="flex items-center justify-between">
                <time class="text-xs text-slate-500">{formatDate(post.date)}</time>
                <a 
                  href={`/en/blog/${post.slug}`}
                  class="text-sm font-medium text-primary-600 hover:text-primary-700 inline-flex items-center gap-1"
                >
                  {t('blog.readMore')}
                  <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
                  </svg>
                </a>
              </div>
            </div>
          </article>
        ))}
      </div>
    </div>
  </section>
</Layout>
